<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Get Gutenberg Block when out of context</title>
    <link rel="stylesheet" href="./../../../dist/assets/index.css"/>
    <link rel="icon" href="./../../../assets/favicon/favicon.png" sizes="32x32" type="image/png"/>
</head>
<body>
    <section class="cards">
        <div class="container">
            <h1>This snippet is for getting the needed gutenberg block, when out of context (for example when doing something in ajax)</h1>
            <pre><code>
$post_id = $_POST['post_id'] ?? get_the_ID();
$content = get_post_field('post_content', $post_id);
$blocks = parse_blocks($content);
$target_block_name = 'acf/acf-block';

foreach ($blocks as $block) {
    if ($block['blockName'] === $target_block_name) {
        //do stuff with block
    }
}
</code></pre>
        </div>
    </section>
</body>
</html>
